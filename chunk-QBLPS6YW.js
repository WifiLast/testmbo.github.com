import{a as h,b as w,c as M,e as C,f as P,g as n,h as a,i as u,j as b,k as i,m as _,p as E,t as S}from"./chunk-F3Q6RXN2.js";var y=class v{constructor(e){this.modelCacheService=e}pdfDoc=null;currentModel="a2htc";ngOnInit(){this.loadExternalScripts()}ngAfterViewInit(){setTimeout(()=>{this.initializeViewer(),this.initializePDF(),this.preloadModelsForAR()},100)}preloadModelsForAR(){setTimeout(()=>{["https://pub-307281ad98f24254a52da2bb71f8637b.r2.dev/A2HTC-2025-15-10_v5.glb","https://pub-307281ad98f24254a52da2bb71f8637b.r2.dev/A2HTC-2025-15-10_mit Verrohrung_v5.glb"].forEach(t=>{fetch(t,{mode:"cors"}).then(()=>console.log(`\u2713 Preloaded for AR: ${t.split("/").pop()}`)).catch(o=>console.warn(`Failed to preload: ${t.split("/").pop()}`,o))})},1e3)}loadExternalScripts(){if(!document.querySelector('script[src*="jszip"]')){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js",document.head.appendChild(e)}if(!document.querySelector('script[src*="model-viewer"]')){let e=document.createElement("script");e.type="module",e.src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js",document.head.appendChild(e),e.onload=()=>{customElements.whenDefined("model-viewer").then(()=>{window.ModelViewerStatic&&(window.ModelViewerStatic.minimumRenderScale=1)})}}if(!document.querySelector('script[src*="pdfjs-dist"]')){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js",e.onload=()=>{typeof pdfjsLib<"u"&&(pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js")},document.head.appendChild(e)}}initializeViewer(){let e=document.getElementById("arModell"),t=document.getElementById("mvLoading"),o=t?.querySelector(".mv-loading-text");e&&(e.addEventListener("load",()=>{t&&(t.style.display="none"),e.dismissPoster(),setTimeout(()=>{let r=e.shadowRoot?.querySelector('button[slot="ar-button"]')||e.shadowRoot?.querySelector(".ar-button")||e.shadowRoot?.querySelector('[aria-label*="AR"]');r?(console.log("AR button found, adding interceptor"),r.addEventListener("click",l=>h(this,null,function*(){l.preventDefault(),l.stopPropagation(),console.log("AR button clicked, switching to original URL...");let s=this.modelCacheService.getOriginalUrl(this.currentModel);s&&e.src!==s&&(e.src=s,yield new Promise(f=>{let c=()=>{console.log("Original URL loaded, activating AR..."),e.removeEventListener("load",c),f()};e.addEventListener("load",c),setTimeout(()=>{e.removeEventListener("load",c),f()},1e4)})),e.activateAR()}),{capture:!0})):console.warn("AR button not found in shadow DOM")},1e3)},{once:!0}),e.addEventListener("progress",r=>{let l=Math.round((r.detail?.totalProgress||0)*100);!Number.isFinite(l)||l<=0||l>=100}),e.addEventListener("error",()=>{o&&(o.textContent="Ladevorgang fehlgeschlagen")}),e.addEventListener("touchmove",r=>r.preventDefault(),{passive:!1}),e.addEventListener("wheel",r=>r.preventDefault(),{passive:!1}),this.waitForCacheAndLoad())}waitForCacheAndLoad(){return h(this,null,function*(){let e=this.modelCacheService.getModel("a2htc");if(e){console.log("\u2713 Model loaded from cache instantly!"),this.loadModelFromUrl(e),this.setActiveButton("a2htc");return}console.log("Model not cached yet, waiting...");let t=yield this.modelCacheService.waitForModel("a2htc",2e3);if(t)console.log("\u2713 Model loaded from cache after brief wait"),this.loadModelFromUrl(t),this.setActiveButton("a2htc");else{console.log("Cache timeout - fallback to original uncompressed URL");let o=this.modelCacheService.getOriginalUrl("a2htc");o?(console.log("\u2713 Loading from original URL:",o),this.loadModelFromUrl(o),this.setActiveButton("a2htc")):console.error("Failed to load model - no cache and no original URL available")}})}loadGLBFromZip(e){return h(this,null,function*(){try{console.log("Loading ZIP:",e);let t=yield fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.statusText}`);let o=yield t.arrayBuffer(),l=yield new JSZip().loadAsync(o),s=null;for(let d in l.files)if(d.toLowerCase().endsWith(".glb")){s=d;break}if(!s)throw new Error("No GLB file found in ZIP archive");console.log(`Extracting ${s}...`);let f=l.file(s);if(!f)throw new Error("Could not access file in archive");let c=yield f.async("arraybuffer"),g=new Uint8Array(c,0,4);if(!(g[0]===103&&g[1]===108&&g[2]===84&&g[3]===70))throw new Error("Extracted file is not a valid GLB model");let p=new Blob([c],{type:"model/gltf-binary"}),m=URL.createObjectURL(p);return console.log("GLB extracted successfully"),m}catch(t){throw console.error("Error loading GLB from ZIP:",t),t}})}loadModel(e){return h(this,null,function*(){try{if(!document.getElementById("arModell"))return;let o=this.modelCacheService.getModel(e);if(o)console.log(`\u2713 Using cached model for ${e}`),this.loadModelFromUrl(o);else{console.log(`Model ${e} not in cache, waiting...`);let r=yield this.modelCacheService.waitForModel(e,5e3);if(r)console.log(`\u2713 Got ${e} from service after waiting`),this.loadModelFromUrl(r);else{console.log(`Cache timeout for ${e} - fallback to original URL`);let l=this.modelCacheService.getOriginalUrl(e);l?(console.log(`\u2713 Loading ${e} from original URL`),this.loadModelFromUrl(l)):console.error(`Failed to load model ${e} - no cache and no original URL available`)}}this.currentModel=e,this.setActiveButton(e==="a2htc"?"a2htc":"verrohrung")}catch(t){console.error(`Failed to load model ${e}:`,t)}})}loadModelFromUrl(e){let t=document.getElementById("arModell");t&&(t.src=e)}setActiveButton(e){document.querySelectorAll("[data-model]").forEach(o=>{o.classList.remove("is-active"),o.setAttribute("aria-pressed","false"),o.getAttribute("data-model")===e&&(o.classList.add("is-active"),o.setAttribute("aria-pressed","true"))})}onModelSwitch(e,t){e.preventDefault();let o=t==="a2htc"?"a2htc":"a2htc_verrohrung";this.loadModel(o)}initializePDF(){return h(this,null,function*(){let e=document.getElementById("pdfContainer"),t="https://wifilast.github.io/testmbo.github.com/pdf/A2HTC_Datasheet.pdf";if(!e){console.warn("PDF container not found");return}console.log("Initializing PDF viewer for:",t);let o=setInterval(()=>{typeof pdfjsLib<"u"&&(clearInterval(o),console.log("PDF.js library loaded, loading document..."),pdfjsLib.getDocument(t).promise.then(r=>{console.log(`PDF loaded successfully: ${r.numPages} pages`),this.pdfDoc=r,this.renderAllPages(e)}).catch(r=>{console.error("Failed to load PDF:",t,r),e.innerHTML=`<p style="color: #ff6b6b; padding: 20px;">PDF konnte nicht geladen werden: ${r.message}</p>`}))},100);setTimeout(()=>{clearInterval(o),this.pdfDoc||console.warn("PDF.js library timeout - check if library is loading")},1e4)})}renderAllPages(e){return h(this,null,function*(){if(!this.pdfDoc)return;e.innerHTML="";let t=this.pdfDoc.numPages,o=Math.floor(Math.min(e.clientWidth||1180,880)),r=Math.max(1,Math.floor(window.devicePixelRatio||1)),l=2;for(let s=1;s<=t;s++){let f=yield this.pdfDoc.getPage(s),c=f.getViewport({scale:1}),g=o/c.width,x=f.getViewport({scale:g*r*l}),p=document.createElement("canvas"),m=p.getContext("2d",{alpha:!0});p.width=Math.floor(x.width),p.height=Math.floor(x.height),p.style.width=Math.floor(c.width*g)+"px",p.style.height=Math.floor(c.height*g)+"px",m.save(),m.fillStyle="#ffffff",m.fillRect(0,0,p.width,p.height),m.restore(),yield f.render({canvasContext:m,viewport:x,intent:"display"}).promise;let d=document.createElement("div");d.className="pdf-page",d.style.margin="12px auto",d.style.width=o+"px",d.style.borderRadius="12px",d.style.overflow="hidden",d.style.border="1px solid rgba(255,255,255,.12)",d.style.background="#fff",d.appendChild(p),e.appendChild(d)}})}static \u0275fac=function(t){return new(t||v)(C(S))};static \u0275cmp=P({type:v,selectors:[["app-projekt-a2htc"]],decls:80,vars:0,consts:[[2,"position","fixed","inset","0","z-index","-1","background",`radial-gradient(circle at 30% 10%, rgba(255,91,215,.15), transparent 50%),
  radial-gradient(circle at 85% 40%, rgba(109,158,255,.18), transparent 55%),
  #050511`],[1,"hero"],[1,"inner"],[1,"kicker"],[1,"a2wrap"],[1,"exp2"],[1,"sub"],[1,"tags"],[1,"tag"],[1,"container"],[1,"grid"],["id","viewerCard",1,"card","viewer-wrap"],["id","arModell","loading","eager","reveal","interaction","powerPreference","high-performance","poster","https://wifilast.github.io/testmbo.github.com/bilder/A2HTC_comp.webp","alt","A2HTC 3D Modell","ar","","ar-modes","scene-viewer quick-look","camera-controls","","auto-rotate","","shadow-intensity","1","tone-mapping","aces","exposure","1.05","shadow-softness","0.2"],["id","mvLoading","role","status","aria-live","polite",1,"mv-loading"],["aria-hidden","true",1,"mv-spinner"],[1,"mv-loading-text"],["role","note","aria-label","AR Hinweis",1,"ar-hint"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["d","M12 2 20 6 20 18 12 22 4 18 4 6 12 2z"],["d","M12 2v20M4 6l8 4 8-4M4 18l8-4 8 4"],[1,"card","side"],[1,"meta"],["for","modellButtons",1,"switches-label"],["id","modellButtons","role","group","aria-label","Modell ausw\xE4hlen",1,"switches"],["data-model","a2htc","aria-pressed","true",1,"btn","btn--sm","btn--pill","is-active",3,"click"],["data-model","verrohrung","aria-pressed","false",1,"btn","btn--sm","btn--pill",3,"click"],[2,"margin-top","6px","color","var(--muted)"],["id","datasheet",1,"pdf","card"],[1,"pdf-head"],[1,"pdf-title"],["href","https://wifilast.github.io/testmbo.github.com/pdf/A2HTC_Datasheet.pdf","target","_blank","rel","noopener",1,"btn","btn--pill","btn--sm"],["id","pdfContainer"],["routerLink","/",1,"back","btn","btn--pill"]],template:function(t,o){t&1&&(u(0,"div",0),n(1,"section",1)(2,"div",2)(3,"div",3),i(4,"Projekt"),a(),n(5,"h1")(6,"span",4),i(7,"A"),n(8,"span",5),i(9,"2"),a()(),i(10,"HTC Pr\xE4zisionsklimager\xE4t"),a(),n(11,"p",6),i(12,"Pr\xE4zise Klima- und Feuchtesteuerung f\xFCr sensible Prozesse in Produktion, Labor und Qualit\xE4tssicherung \u2013 stabil, energieeffizient, AR-visualisiert."),a(),n(13,"div",7)(14,"span",8),i(15,"Photolithographie / Developer"),a(),n(16,"span",8),i(17,"Labor & RnD"),a(),n(18,"span",8),i(19,"Metrologie & QS"),a(),n(20,"span",8),i(21,"Prozess-Stabilit\xE4t"),a(),n(22,"span",8),i(23,"Konstante Umgebungsbedingungen"),a(),n(24,"span",8),i(25,"24/7 Produktion"),a()()()(),n(26,"main",9)(27,"div",10)(28,"section",11),u(29,"model-viewer",12),n(30,"div",13),u(31,"div",14),n(32,"span",15),i(33,"Modell l\xE4dt\u2026"),a()(),n(34,"div",16),w(),n(35,"svg",17),u(36,"path",18)(37,"path",19),a(),M(),n(38,"span"),i(39,"Auf dem "),n(40,"strong"),i(41,"Smartphone"),a(),i(42," das "),n(43,"em"),i(44,"AR-Symbol"),a(),i(45," im Viewer antippen, um das Modell im Raum zu platzieren."),a()()(),n(46,"aside",20)(47,"h2"),i(48,"Spezifikationen"),a(),n(49,"div",21)(50,"div"),i(51,"Modellnummer"),a(),n(52,"div"),i(53,"90221036000"),a(),n(54,"div"),i(55,"Kategorie"),a(),n(56,"div"),i(57,"Pr\xE4zisionsklimager\xE4t"),a(),n(58,"div"),i(59,"Status"),a(),n(60,"div"),i(61,"Pr\xE4sentationsmodell"),a()(),n(62,"label",22),i(63,"Modell ausw\xE4hlen"),a(),n(64,"div",23)(65,"button",24),b("click",function(l){return o.onModelSwitch(l,"a2htc")}),i(66,"A2HTC"),a(),n(67,"button",25),b("click",function(l){return o.onModelSwitch(l,"verrohrung")}),i(68,"A2HTC + Verrohrung"),a()(),n(69,"p",26),i(70,"Gesten: Drehen/Zoomen. AR startet \xFCber das Viewer-Icon (Android/iOS)."),a()()(),n(71,"section",27)(72,"div",28)(73,"h3",29),i(74,"Datenblatt \u2013 Vorschau"),a(),n(75,"a",30),i(76,"PDF \xF6ffnen"),a()(),u(77,"div",31),a(),n(78,"a",32),i(79,"\u27F5 Zur Startseite"),a()())},dependencies:[_,E],styles:["[_ngcontent-%COMP%]:root{--bg:#050511;--panel:#0a0a1c;--glass:rgba(255,255,255,.06);--txt:#e9ecff;--muted:#a9b1d6;--container:1180px;--radius:18px;--neon:#6d9eff;--hot:#3ea8ff}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;color:var(--txt);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#050511;overflow-x:hidden}.hero[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{max-width:var(--container);margin:0 auto;padding:34px 18px 8px}.kicker[_ngcontent-%COMP%]{color:var(--neon);font-weight:900;text-transform:uppercase;letter-spacing:.12em;font-size:12px}h1[_ngcontent-%COMP%]{margin:.3rem 0 .25rem;font-size:clamp(30px,5vw,54px);line-height:1.06}.sub[_ngcontent-%COMP%]{color:var(--muted);max-width:900px}.tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}.tag[_ngcontent-%COMP%]{font-size:12px;font-weight:800;padding:6px 10px;border-radius:999px;background:var(--glass);border:1px solid rgba(255,255,255,.12)}.container[_ngcontent-%COMP%]{max-width:var(--container);margin:0 auto;padding:16px 18px 90px}.grid[_ngcontent-%COMP%]{display:grid;gap:18px;grid-template-columns:1fr 340px}@media (max-width: 1100px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.card[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius);overflow:hidden;background:linear-gradient(180deg,#ffffff0d,#ffffff05);border:1px solid rgba(255,255,255,.12);box-shadow:0 10px 36px #00000080,0 0 20px #6d9eff38}.viewer-wrap[_ngcontent-%COMP%]{padding:14px;background:linear-gradient(180deg,#6d9eff14,#ffffff05)}model-viewer[_ngcontent-%COMP%]{width:100%;height:min(64vh,720px);min-height:420px;background:#0b0b20;border-radius:14px;border:1px solid rgba(255,255,255,.12);touch-action:none;overscroll-behavior:contain;-webkit-user-select:none;-webkit-touch-callout:none}.side[_ngcontent-%COMP%]{padding:16px}.side[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(22px,2.2vw,28px);margin:0 0 10px}.meta[_ngcontent-%COMP%]{display:grid;grid-template-columns:150px 1fr;gap:8px 12px;font-size:15px}.meta[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{color:#a8c2ff;font-weight:800}.btn[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;border:0;cursor:pointer;font-weight:900;line-height:1;color:#0a0a18;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,var(--hot),#86b7ff 50%,var(--neon));box-shadow:0 0 10px #6d9eff73,0 0 18px #3ea8ff59;transition:filter .18s ease,box-shadow .18s ease,transform .18s ease;text-decoration:none;display:inline-flex;align-items:center;gap:.5ch}.btn[_ngcontent-%COMP%]:hover{filter:saturate(1.12) brightness(1.05);box-shadow:0 0 12px #6d9effa6,0 0 22px #3ea8ff8c}.btn--pill[_ngcontent-%COMP%]{border-radius:999px}.btn--sm[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.btn.is-active[_ngcontent-%COMP%]{outline:2px solid rgba(109,158,255,.65);box-shadow:0 0 12px #6d9effbf,0 0 26px #3ea8ff8c}.switches[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 4px}.switches-label[_ngcontent-%COMP%]{display:block;margin:6px 0;font-size:11px;font-weight:900;letter-spacing:.08em;color:#a8c2ff;text-transform:uppercase}.switches[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{cursor:pointer;border:1px solid rgba(109,158,255,.55);box-shadow:inset 0 -2px #00000040,0 4px 14px #3ea8ff47,0 0 6px #6d9eff38;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}.switches[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);filter:brightness(1.06) saturate(1.08);box-shadow:inset 0 -2px #00000040,0 6px 16px #3ea8ff57,0 0 10px #6d9eff4d}.switches[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:inset 0 2px #00000040,0 2px 8px #3ea8ff38}.switches[_ngcontent-%COMP%]   .btn.is-active[_ngcontent-%COMP%]{outline:2px solid rgba(109,158,255,.85);box-shadow:0 0 12px #6d9eff8c,0 0 26px #3ea8ff66}.switches[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid rgba(109,158,255,.9);outline-offset:2px}.pdf.card[_ngcontent-%COMP%]{margin-top:18px;padding:14px}.pdf-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}.pdf-title[_ngcontent-%COMP%]{font-size:clamp(20px,2vw,26px);margin:0}.pdf-page[_ngcontent-%COMP%]{background:#fff}.pdf-page[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;image-rendering:auto;background:#fff}.back[_ngcontent-%COMP%]{display:block;width:max-content;margin:30px auto 0}.ar-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:10px 0 0;padding:8px 12px;font-size:13px;line-height:1.2;color:#dfe7ff;background:linear-gradient(180deg,#ffffff0f,#ffffff08);border:1px solid rgba(109,158,255,.25);border-radius:12px;box-shadow:0 2px 14px #00000059,0 0 12px #6d9eff1a;-webkit-backdrop-filter:blur(6px) saturate(130%);backdrop-filter:blur(6px) saturate(130%)}.ar-hint[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:800}.ar-hint[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:normal;color:var(--neon);font-weight:800}.ar-hint[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex:0 0 18px;color:var(--neon);filter:drop-shadow(0 0 6px rgba(109,158,255,.35));opacity:.95}.a2wrap[_ngcontent-%COMP%]{display:inline-flex;align-items:flex-start}.a2wrap[_ngcontent-%COMP%]   .exp2[_ngcontent-%COMP%]{font-size:.6em;line-height:1;transform:translateY(-.1em);margin-left:.02em;font-family:inherit;color:inherit}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .a2wrap[_ngcontent-%COMP%]   .exp2[_ngcontent-%COMP%]{font-weight:900}"]})};export{y as ProjektA2htc};
